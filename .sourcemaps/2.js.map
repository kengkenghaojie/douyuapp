{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SearchPage } from './search';\nimport {SearchProvider} from \"../../providers/search/search\";\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SearchPage),\n  ],\n  providers:[SearchProvider]\n})\nexport class SearchPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Content, AlertController, ToastController, ActionSheetController } from 'ionic-angular';\nimport {SearchProvider} from \"../../providers/search/search\";\n\n/**\n * Generated class for the SearchPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html',\n})\nexport class SearchPage {\n  searchLoadData: any;\n  classMap: any  = ['icon-v2-num1', 'icon-v2-num2', 'icon-v2-num3', 'icon-v2-num4', 'icon-v2-num5', 'icon-v2-num6', 'icon-v2-num7', 'icon-v2-num8', 'icon-v2-num9', 'icon-v2-num10']\n  searchResult: boolean = true;\n  queryWord:string;\n  type:number=1;\n  sort:number=1;\n  limit:number=20;\n  offset:number=0;\n  showSearchListData: any;\n  cate: boolean = false;\n  anchor: boolean = false;\n  live: boolean = false;\n\n  all:boolean = true;\n  liveRooms:boolean = false;\n  liveAnchors:boolean = false;\n  liveRoomsData: any;\n  cur:number=1;\n  sortContent:string = '相关度';\n  @ViewChild(Content) content: Content;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public alertCtrl: AlertController,\n    public actionsheetCtrl: ActionSheetController,\n    public toastCtrl: ToastController,\n    public searchProvider:SearchProvider\n  ) {\n    this.getLoadSearchData();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SearchPage');\n  }\n  getLoadSearchData() {\n    this.searchProvider.searchListData().subscribe(\n      data => {\n        this.searchLoadData = data;\n        console.log(this.searchLoadData)\n      },\n      error => {\n      }\n    );\n  };\n\n  search(queryWord,type,sort,limit,offset,i) {    //queryWord：搜索内容\n\n    if(queryWord == undefined || queryWord == \"\"){\n      this.showLongToast();\n      return ;\n    }else{\n      this.searchResult = false;\n      if(i == undefined){\n        this.cur = 1;\n      }else if(i == 4 || i == 5){\n        this.cur = this.cur;\n      }else{\n        this.cur = i;\n        this.content.scrollToTop();\n      };\n\n      if(this.sortContent == \"相关度\"){\n        sort = 1;\n        this.sort = 1;\n      }else if(this.sortContent == \"人气值\"){\n        sort = 2;\n        this.sort = 2;\n      }else if(this.sortContent == \"关注量\"){\n        sort = 3;\n        this.sort = 3;\n      }\n\n      this.type = type;\n      this.offset = offset;\n\n      this.searchProvider.showSearchListData(queryWord,type,sort,limit,offset).subscribe(\n        data => {\n          //抽取公共方法\n          this.valueI(i,data);\n        },\n        error => {\n        }\n      );\n    }\n  };\n\n  //判断i的值\n  valueI(i,data) {\n    //首先判定是i什么类型,切换下面的tab\n    if(i == 1 || i == undefined) {\n      this.all = true;\n      this.liveRooms = false;\n      this.liveAnchors = false;\n      this.showSearchListData = data;\n      //console.log(this.showSearchListData);\n      this.anchor = true;\n      this.live = true;\n      if(this.showSearchListData.cate.length == 0){\n        this.cate = false;\n      }else{\n        this.cate = true;\n      }\n    }else if(i == 2){\n      this.all = false;\n      this.liveRooms = true;\n      this.liveAnchors = false;\n      this.liveRoomsData = data;\n      //console.log(this.liveRoomsData);\n    }else if(i == 3){\n      this.all = false;\n      this.liveRooms = false;\n      this.liveAnchors = true;\n      this.liveRoomsData = data;\n      //console.log(this.liveRoomsData);\n    }else if(i == 4){\n      for(let i=0;i<20;i++){\n        this.liveRoomsData.live.push(data.live[i]);\n      }\n    }\n    else if(i == 5){\n      for(let i=0;i<20;i++){\n        this.liveRoomsData.anchor.push(data.anchor[i]);\n      }\n    }\n  };\n\n  searchHot(queryWord,type,sort,limit,offset,i) {\n\n    this.queryWord = queryWord;\n    this.searchResult = false;\n    this.cur = 1;\n\n    this.searchProvider.showSearchListData(queryWord,type,sort,limit,offset).subscribe(\n      data => {\n        this.valueI(i,data);\n      },\n      error => {\n      }\n    );\n\n  };\n  toRoom(live) {\n    this.navCtrl.push(\"RoomPage\", {\n      item: live\n    });\n  };\n\n  showLongToast() {\n    let toast = this.toastCtrl.create({\n      message: '请输入关键字查询',\n      duration: 2000,\n    });\n    toast.present();\n  };\n  toLiveList(event, cate2Info) {\n    //window.localStorage.setItem(\"shortName\",cate2Info.shortName);\n    console.log(cate2Info)\n    this.navCtrl.push(\"LiveListPage\", {\n      item: cate2Info,\n      liveClass: cate2Info.cate2Name,\n      shortName: cate2Info.shortName,\n      cate_id : cate2Info.cate2Id\n    });\n  }\n\n  imgError(liveItem){     //图片报错的时候自动切换为默认的图片\n    liveItem.roomSrc = \"./assets/images/list-item-def-thumb.gif\";\n  };\n  openMenu() {\n    let actionSheet = this.actionsheetCtrl.create({\n      title: this.sortContent,\n      cssClass: 'action-sheets-basic-page',\n      buttons: [\n        {\n          text: '相关度',\n          icon:  'happy',\n          handler: () => {\n            this.sortContent = '相关度';\n            this.search(this.queryWord,1,1,20,0,1);\n          }\n        },\n        {\n          text: '人气值',\n          icon:  \"people\",\n          handler: () => {\n            this.sortContent = '人气值';\n            this.search(this.queryWord,1,2,20,0,1);\n          }\n        },\n        {\n          text: '关注量',\n          icon:  \"heart\",\n          handler: () => {\n            this.sortContent = '关注量';\n            this.search(this.queryWord,1,3,20,0,1);\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  };\n\n  doInfinite(infiniteScroll,i) {\n    this.offset = this.offset +20;\n    let liveRoomsDataScroll = this.liveRoomsData;\n    setTimeout(() => {\n\n      this.search(this.queryWord,this.type,this.sort,20,this.offset,i)\n\n\n      infiniteScroll.complete();\n    }, 500);\n  };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}