{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AACuB;AAW7D;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAT5B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;YACD,SAAS,EAAC,CAAC,gFAAc,CAAC;SAC3B,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACdwB;AACsE;AAC9D;AAE7D;;;;;GAKG;AAOH;IAsBE,oBACS,OAAsB,EACtB,SAAoB,EACpB,SAA0B,EAC1B,eAAsC,EACtC,SAA0B,EAC1B,cAA6B;QAL7B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAuB;QACtC,cAAS,GAAT,SAAS,CAAiB;QAC1B,mBAAc,GAAd,cAAc,CAAe;QA1BtC,aAAQ,GAAS,CAAC,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,eAAe,CAAC;QAClL,iBAAY,GAAY,IAAI,CAAC;QAE7B,SAAI,GAAQ,CAAC,CAAC;QACd,SAAI,GAAQ,CAAC,CAAC;QACd,UAAK,GAAQ,EAAE,CAAC;QAChB,WAAM,GAAQ,CAAC,CAAC;QAEhB,SAAI,GAAY,KAAK,CAAC;QACtB,WAAM,GAAY,KAAK,CAAC;QACxB,SAAI,GAAY,KAAK,CAAC;QAEtB,QAAG,GAAW,IAAI,CAAC;QACnB,cAAS,GAAW,KAAK,CAAC;QAC1B,gBAAW,GAAW,KAAK,CAAC;QAE5B,QAAG,GAAQ,CAAC,CAAC;QACb,gBAAW,GAAU,KAAK,CAAC;QAWzB,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,mCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;IAC3C,CAAC;IACD,sCAAiB,GAAjB;QAAA,iBASC;QARC,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC,SAAS,CAC5C,cAAI;YACF,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,cAAc,CAAC;QAClC,CAAC,EACD,eAAK;QACL,CAAC,CACF,CAAC;IACJ,CAAC;IAAA,CAAC;IAEF,2BAAM,GAAN,UAAO,SAAS,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC,CAAC;QAAzC,iBAuCC;QArCC,EAAE,EAAC,SAAS,IAAI,SAAS,IAAI,SAAS,IAAI,EAAE,CAAC,EAAC;YAC5C,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,MAAM,CAAE;QACV,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,EAAE,EAAC,CAAC,IAAI,SAAS,CAAC,EAAC;gBACjB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;YACf,CAAC;YAAA,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;gBACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;YACtB,CAAC;YAAA,IAAI,EAAC;gBACJ,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;gBACb,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YAC7B,CAAC;YAAA,CAAC;YAEF,EAAE,EAAC,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,EAAC;gBAC5B,IAAI,GAAG,CAAC,CAAC;gBACT,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YAChB,CAAC;YAAA,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,EAAC;gBAClC,IAAI,GAAG,CAAC,CAAC;gBACT,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YAChB,CAAC;YAAA,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,EAAC;gBAClC,IAAI,GAAG,CAAC,CAAC;gBACT,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YAChB,CAAC;YAED,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YAErB,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,SAAS,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,MAAM,CAAC,CAAC,SAAS,CAChF,cAAI;gBACF,QAAQ;gBACR,KAAI,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC;YACtB,CAAC,EACD,eAAK;YACL,CAAC,CACF,CAAC;QACJ,CAAC;IACH,CAAC;IAAA,CAAC;IAEF,OAAO;IACP,2BAAM,GAAN,UAAO,CAAC,EAAC,IAAI;QACX,qBAAqB;QACrB,EAAE,EAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,uCAAuC;YACvC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,EAAE,EAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,EAAC;gBAC3C,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;YACpB,CAAC;YAAA,IAAI,EAAC;gBACJ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACnB,CAAC;QACH,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,CAAC,EAAC;YACf,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;YACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,kCAAkC;QACpC,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,CAAC,EAAC;YACf,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;YACjB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,kCAAkC;QACpC,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,CAAC,EAAC;YACf,GAAG,EAAC,IAAI,GAAC,GAAC,CAAC,EAAC,GAAC,GAAC,EAAE,EAAC,GAAC,EAAE,EAAC,CAAC;gBACpB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAC,CAAC,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,CAAC,EAAC;YACd,GAAG,EAAC,IAAI,GAAC,GAAC,CAAC,EAAC,GAAC,GAAC,EAAE,EAAC,GAAC,EAAE,EAAC,CAAC;gBACpB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAC,CAAC,CAAC,CAAC;YACjD,CAAC;QACH,CAAC;IACH,CAAC;IAAA,CAAC;IAEF,8BAAS,GAAT,UAAU,SAAS,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC,CAAC;QAA5C,iBAcC;QAZC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QAEb,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,SAAS,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,MAAM,CAAC,CAAC,SAAS,CAChF,cAAI;YACF,KAAI,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC;QACtB,CAAC,EACD,eAAK;QACL,CAAC,CACF,CAAC;IAEJ,CAAC;IAAA,CAAC;IACF,2BAAM,GAAN,UAAO,IAAI;QACT,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;YAC5B,IAAI,EAAE,IAAI;SACX,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;IAEF,kCAAa,GAAb;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,UAAU;YACnB,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAAA,CAAC;IACF,+BAAU,GAAV,UAAW,KAAK,EAAE,SAAS;QACzB,+DAA+D;QAC/D,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;QACtB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;YAChC,IAAI,EAAE,SAAS;YACf,SAAS,EAAE,SAAS,CAAC,SAAS;YAC9B,SAAS,EAAE,SAAS,CAAC,SAAS;YAC9B,OAAO,EAAG,SAAS,CAAC,OAAO;SAC5B,CAAC,CAAC;IACL,CAAC;IAED,6BAAQ,GAAR,UAAS,QAAQ;QACf,QAAQ,CAAC,OAAO,GAAG,yCAAyC,CAAC;IAC/D,CAAC;IAAA,CAAC;IACF,6BAAQ,GAAR;QAAA,iBAgCC;QA/BC,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC5C,KAAK,EAAE,IAAI,CAAC,WAAW;YACvB,QAAQ,EAAE,0BAA0B;YACpC,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,KAAK;oBACX,IAAI,EAAG,OAAO;oBACd,OAAO,EAAE;wBACP,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;oBACzC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,KAAK;oBACX,IAAI,EAAG,QAAQ;oBACf,OAAO,EAAE;wBACP,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;oBACzC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,KAAK;oBACX,IAAI,EAAG,OAAO;oBACd,OAAO,EAAE;wBACP,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;oBACzC,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,WAAW,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAAA,CAAC;IAEF,+BAAU,GAAV,UAAW,cAAc,EAAC,CAAC;QAA3B,iBAUC;QATC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAE,EAAE,CAAC;QAC9B,IAAI,mBAAmB,GAAG,IAAI,CAAC,aAAa,CAAC;QAC7C,UAAU,CAAC;YAET,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,EAAC,KAAI,CAAC,IAAI,EAAC,KAAI,CAAC,IAAI,EAAC,EAAE,EAAC,KAAI,CAAC,MAAM,EAAC,CAAC,CAAC;YAGhE,cAAc,CAAC,QAAQ,EAAE,CAAC;QAC5B,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAAA,CAAC;IAlMkB;QAAnB,yEAAS,CAAC,8DAAO,CAAC;kCAAU,8DAAO;+CAAC;IApB1B,UAAU;QAJtB,wEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;6EAwB+B;YACX,sEAAS;YACT,4EAAe;YACT,uEAAqB;YAC3B,iFAAe;YACX,OAAc;OA5B3B,UAAU,CAwNtB;IAAD,CAAC;AAAA;SAxNY,UAAU,e","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SearchPage } from './search';\r\nimport {SearchProvider} from \"../../providers/search/search\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SearchPage),\r\n  ],\r\n  providers:[SearchProvider]\r\n})\r\nexport class SearchPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Content, AlertController, ToastController, ActionSheetController } from 'ionic-angular';\r\nimport {SearchProvider} from \"../../providers/search/search\";\r\n\r\n/**\r\n * Generated class for the SearchPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-search',\r\n  templateUrl: 'search.html',\r\n})\r\nexport class SearchPage {\r\n  searchLoadData: any;\r\n  classMap: any  = ['icon-v2-num1', 'icon-v2-num2', 'icon-v2-num3', 'icon-v2-num4', 'icon-v2-num5', 'icon-v2-num6', 'icon-v2-num7', 'icon-v2-num8', 'icon-v2-num9', 'icon-v2-num10']\r\n  searchResult: boolean = true;\r\n  queryWord:string;\r\n  type:number=1;\r\n  sort:number=1;\r\n  limit:number=20;\r\n  offset:number=0;\r\n  showSearchListData: any;\r\n  cate: boolean = false;\r\n  anchor: boolean = false;\r\n  live: boolean = false;\r\n\r\n  all:boolean = true;\r\n  liveRooms:boolean = false;\r\n  liveAnchors:boolean = false;\r\n  liveRoomsData: any;\r\n  cur:number=1;\r\n  sortContent:string = '相关度';\r\n  @ViewChild(Content) content: Content;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public alertCtrl: AlertController,\r\n    public actionsheetCtrl: ActionSheetController,\r\n    public toastCtrl: ToastController,\r\n    public searchProvider:SearchProvider\r\n  ) {\r\n    this.getLoadSearchData();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad SearchPage');\r\n  }\r\n  getLoadSearchData() {\r\n    this.searchProvider.searchListData().subscribe(\r\n      data => {\r\n        this.searchLoadData = data;\r\n        console.log(this.searchLoadData)\r\n      },\r\n      error => {\r\n      }\r\n    );\r\n  };\r\n\r\n  search(queryWord,type,sort,limit,offset,i) {    //queryWord：搜索内容\r\n\r\n    if(queryWord == undefined || queryWord == \"\"){\r\n      this.showLongToast();\r\n      return ;\r\n    }else{\r\n      this.searchResult = false;\r\n      if(i == undefined){\r\n        this.cur = 1;\r\n      }else if(i == 4 || i == 5){\r\n        this.cur = this.cur;\r\n      }else{\r\n        this.cur = i;\r\n        this.content.scrollToTop();\r\n      };\r\n\r\n      if(this.sortContent == \"相关度\"){\r\n        sort = 1;\r\n        this.sort = 1;\r\n      }else if(this.sortContent == \"人气值\"){\r\n        sort = 2;\r\n        this.sort = 2;\r\n      }else if(this.sortContent == \"关注量\"){\r\n        sort = 3;\r\n        this.sort = 3;\r\n      }\r\n\r\n      this.type = type;\r\n      this.offset = offset;\r\n\r\n      this.searchProvider.showSearchListData(queryWord,type,sort,limit,offset).subscribe(\r\n        data => {\r\n          //抽取公共方法\r\n          this.valueI(i,data);\r\n        },\r\n        error => {\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  //判断i的值\r\n  valueI(i,data) {\r\n    //首先判定是i什么类型,切换下面的tab\r\n    if(i == 1 || i == undefined) {\r\n      this.all = true;\r\n      this.liveRooms = false;\r\n      this.liveAnchors = false;\r\n      this.showSearchListData = data;\r\n      //console.log(this.showSearchListData);\r\n      this.anchor = true;\r\n      this.live = true;\r\n      if(this.showSearchListData.cate.length == 0){\r\n        this.cate = false;\r\n      }else{\r\n        this.cate = true;\r\n      }\r\n    }else if(i == 2){\r\n      this.all = false;\r\n      this.liveRooms = true;\r\n      this.liveAnchors = false;\r\n      this.liveRoomsData = data;\r\n      //console.log(this.liveRoomsData);\r\n    }else if(i == 3){\r\n      this.all = false;\r\n      this.liveRooms = false;\r\n      this.liveAnchors = true;\r\n      this.liveRoomsData = data;\r\n      //console.log(this.liveRoomsData);\r\n    }else if(i == 4){\r\n      for(let i=0;i<20;i++){\r\n        this.liveRoomsData.live.push(data.live[i]);\r\n      }\r\n    }\r\n    else if(i == 5){\r\n      for(let i=0;i<20;i++){\r\n        this.liveRoomsData.anchor.push(data.anchor[i]);\r\n      }\r\n    }\r\n  };\r\n\r\n  searchHot(queryWord,type,sort,limit,offset,i) {\r\n\r\n    this.queryWord = queryWord;\r\n    this.searchResult = false;\r\n    this.cur = 1;\r\n\r\n    this.searchProvider.showSearchListData(queryWord,type,sort,limit,offset).subscribe(\r\n      data => {\r\n        this.valueI(i,data);\r\n      },\r\n      error => {\r\n      }\r\n    );\r\n\r\n  };\r\n  toRoom(live) {\r\n    this.navCtrl.push(\"RoomPage\", {\r\n      item: live\r\n    });\r\n  };\r\n\r\n  showLongToast() {\r\n    let toast = this.toastCtrl.create({\r\n      message: '请输入关键字查询',\r\n      duration: 2000,\r\n    });\r\n    toast.present();\r\n  };\r\n  toLiveList(event, cate2Info) {\r\n    //window.localStorage.setItem(\"shortName\",cate2Info.shortName);\r\n    console.log(cate2Info)\r\n    this.navCtrl.push(\"LiveListPage\", {\r\n      item: cate2Info,\r\n      liveClass: cate2Info.cate2Name,\r\n      shortName: cate2Info.shortName,\r\n      cate_id : cate2Info.cate2Id\r\n    });\r\n  }\r\n\r\n  imgError(liveItem){     //图片报错的时候自动切换为默认的图片\r\n    liveItem.roomSrc = \"./assets/images/list-item-def-thumb.gif\";\r\n  };\r\n  openMenu() {\r\n    let actionSheet = this.actionsheetCtrl.create({\r\n      title: this.sortContent,\r\n      cssClass: 'action-sheets-basic-page',\r\n      buttons: [\r\n        {\r\n          text: '相关度',\r\n          icon:  'happy',\r\n          handler: () => {\r\n            this.sortContent = '相关度';\r\n            this.search(this.queryWord,1,1,20,0,1);\r\n          }\r\n        },\r\n        {\r\n          text: '人气值',\r\n          icon:  \"people\",\r\n          handler: () => {\r\n            this.sortContent = '人气值';\r\n            this.search(this.queryWord,1,2,20,0,1);\r\n          }\r\n        },\r\n        {\r\n          text: '关注量',\r\n          icon:  \"heart\",\r\n          handler: () => {\r\n            this.sortContent = '关注量';\r\n            this.search(this.queryWord,1,3,20,0,1);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    actionSheet.present();\r\n  };\r\n\r\n  doInfinite(infiniteScroll,i) {\r\n    this.offset = this.offset +20;\r\n    let liveRoomsDataScroll = this.liveRoomsData;\r\n    setTimeout(() => {\r\n\r\n      this.search(this.queryWord,this.type,this.sort,20,this.offset,i)\r\n\r\n\r\n      infiniteScroll.complete();\r\n    }, 500);\r\n  };\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}